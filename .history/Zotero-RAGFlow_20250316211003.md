# RAGFlow Zotero 插件

这是一个集成RAGFlow检索增强生成技术的Zotero插件，允许用户将Zotero条目的附件上传到RAGFlow服务，构建知识库并进行基于文档的智能问答。

## 功能特点

- 将Zotero集合中的附件文件上传到RAGFlow服务构建知识库
- 选择已有知识库进行基于文档的问答
- 提供多种模型选择和自定义问答参数
- 记录并管理问答历史
- 参考来源跟踪，明确回答的出处

## 安装说明

1. 下载最新版本的`zotero-ragflow.xpi`插件文件
2. 在Zotero中，点击"工具" > "附加组件"
3. 点击齿轮图标，选择"从文件安装附加组件"
4. 选择下载的`zotero-ragflow.xpi`文件
5. 重启Zotero

## 使用方法

### 初始配置

1. 点击"工具" > "RAGFlow设置"，或者点击顶部菜单"RAGFlow" > "设置"
2. 设置RAGFlow API密钥和API URL
   - 如果使用本地部署的RAGFlow，默认URL通常是 `http://127.0.0.1:8000`

### 创建知识库

1. 选择Zotero中的一个集合
2. 右键点击集合，选择"发送到RAGFlow知识库"，或者点击顶部菜单"RAGFlow" > "发送到RAGFlow知识库"
3. 确认上传操作
4. 等待上传和知识库构建完成

### 选择现有知识库

1. 点击顶部菜单"RAGFlow" > "选择已有知识库"
2. 从列表中选择要使用的知识库

### 问答交互

1. 点击顶部菜单"RAGFlow" > "RAGFlow知识库问答"
2. 在对话框中输入问题
3. 系统会从知识库中检索相关信息并生成回答

### 查看历史记录

1. 点击顶部菜单"RAGFlow" > "查看问答历史"
2. 浏览之前的问答记录
3. 可以复制回答或再次提问

### 聊天助手设置

1. 点击顶部菜单"RAGFlow" > "聊天助手设置"
2. 配置模型、温度、相似度阈值等参数

## 系统架构

RAGFlow插件由以下主要组件构成：

1. **RAGFlowService**: 负责与RAGFlow API交互
2. **RAGFlowUI**: 负责创建和管理UI界面
3. **Addon**: 主插件类，协调各组件交互
4. **Logger**: 日志记录工具
5. **StorageManager**: 负责数据持久化存储

## 流程图

### 整体系统架构

```mermaid
graph TD
    A[Addon] --> B[RAGFlowService]
    A --> C[RAGFlowUI]
    A --> D[Logger]
    A --> E[StorageManager]
    
    B <--> F[RAGFlow API]
    C --> G[Zotero UI]
    E --> H[本地存储]